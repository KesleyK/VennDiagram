<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>DiagramaVenn | Exercícios</title>
  <link rel="stylesheet" href="public/css/style.css">

  <link rel="stylesheet" href="./public/css/style.css">
</head>

<body>

  <main class="main">
    <div class="arrow__holder">
      <a href="../index.html" class="arrow__link">&crarr;</a>
    </div>

    <div class="main__content">
      <div id="modal" class="modal invisible">
        <button class="btn-closeModal">X</button>
        <div class="modal__group">
          <textarea type="text" class="modal__description" placeholder="Descrição"></textarea>
        </div>
        <div class="modal__group">
          <input type="text" class="modal__statment" name="statment" placeholder="Enunciado">
        </div>
        <div class="modal__group">
          <input type="text" class="modal__result" name="result" placeholder="Resposta">
        </div>
        <div class="modal__group">
          <label for="hint-1">Ajuda 1:</label>
          <input type="text" class="modal__hint--1" name="hint-1">
        </div>
        <div class="modal__group">
          <label for="hint-2">Ajuda 2:</label>
          <input type="text" class="modal__hint--2" name="hint-2">
        </div>
        <div class="modal__group">
          <label for="hint-3">Ajuda 3:</label>
          <input type="text" class="modal__hint--3" name="hint-3">
        </div>
        <button id="btn-addExecises">Adicionar Exercício</button>
      </div>

      <div id="modal-exercise2" class="modal invisible">
        <button class="btn-closeModal2">X</button>
        <img src="" class="modal-exercise2__img" alt="Exercise Hint">
      </div>

      <div class="sidebar">
        <div class="sidebar__exercise active" onclick="changeActiveElement(this, 0)">B∩¬(A∪C)</div>
        <div class="sidebar__exercise" onclick="changeActiveElement(this, 1)">B x C</div>
        <div class="sidebar__exercise" onclick="changeActiveElement(this, 2)">Valor de um conjunto</div>
        <div class="sidebar__exercise" onclick="changeActiveElement(this, 3)">Problema prático</div>
      </div>

      <div class="diagram-holder">
        <button class="btn-openModal">Adicionar Exercício</button>

        <div id="holder">
          <p class="exercise-statment exercise-statment--2 invisible">
            <span>A∪B = {1,2,3,4,5,6,7,8}</span>
            <span>A∩B = {4,5}</span>
            <span>A-B = {1,2,3}</span>
          </p>
          <p class="exercise-statment exercise-statment--3 invisible">
            <span>
              Um fazendeiro marcou todo o seu rebanho de gado, 80% recebeu etiquetas de carne de qualidade A
              e 60% recebeu etiquetas de alimentação com ração.
            </span>
          </p>
          <div id="venn"></div>
          <p id="set-values"></p>
        </div>

        <div class="tutor">
          <div class="tutor__console">
            <div class="tutor__console--label">
              Resolva: B∩¬(A∪C)
            </div>
            <div class="tutor__console--messages"></div>
            <input type="text" placeholder="Escreva sua resposta" name="consoleInput" class="tutor__console--input">
          </div>

          <div class="tutor__btn-holder">
            <button class="button--send" id="btn-send">Enviar</button>
            <button class="button--hint" id="btn-hint">Ajuda</button>
          </div>
        </div>
      </div>
    </div>
  </main>

  <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <script src="./vennJs/venn.js"></script>
  <script src="./vennJs/sets.js"></script>
  <script src="./vennJs/tooltip-add.js"></script>
  <script src="./public/js/change-exercises.js"></script>

  <script>
    let newExercisePosition = 4;
    const btnAddExercise = $('#btn-addExecises');
    const btnOpenModal = $('.btn-openModal');
    const btnCloseModal = $('.btn-closeModal');
    const modal = $('#modal');

    modal.hide();
    modal.css('opacity', 1);

    btnOpenModal.on('click', () => {
      modal.fadeIn(100);
    });

    btnCloseModal.on('click', () => {
      modal.fadeOut(100);
    });

    btnAddExercise.on('click', () => {
      const newExerciseDescription = $('.modal__description').val();
      const newExerciseStatment = $('input[name="statment"]').val();
      const newExerciseResult = $('input[name="result"]').val();
      const newExerciseHint1 = $('input[name="hint-1"]').val();
      const newExerciseHint2 = $('input[name="hint-2"]').val();
      const newExerciseHint3 = $('input[name="hint-3"]').val();

      const labelOnSidebar = `
        <div class="sidebar__exercise" onclick="changeActiveElement(this, ${newExercisePosition})">
          Problema Criado
        </div>`;

      const entireStatment = `
        <p class="exercise-statment exercise-statment--${newExercisePosition} invisible">
          <span>
            ${newExerciseDescription}
          </span>
        </p>`;

      results.push(newExerciseResult);
      labels.push(newExerciseStatment);
      hints.push([
        newExerciseHint1,
        newExerciseHint2,
        newExerciseHint3
      ]);

      $('.sidebar').append(labelOnSidebar);
      $('#holder').append(entireStatment);
      $('#modal').fadeOut(100);

      newExercisePosition++;
    });

  </script>

</body>

</html>